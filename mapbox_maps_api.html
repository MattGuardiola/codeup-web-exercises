<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="js/mapbox-geocoder-utils.js"></script>
  <script src="js/keys.js"></script>
  <meta charset="UTF-8">
  <title>First Mapbox Map</title>
  <!-- Mapbox CSS -->
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' />
  <!-- Custom CSS -->
  <style>
    #map {
      /* the width and height may be set to any size */
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>
<button type="button" class="btn btn-primary m-2" onclick="setZoom(5)">5x</button>
<button type="button" class="btn btn-primary m-2" onclick="setZoom(10)">10x</button>
<button type="button" class="btn btn-primary m-2" onclick="setZoom(15)">15x</button>
<br>
<input class="ms-4 mb-4" type="text" id="search-box" placeholder="Enter Address">
<button type="button" class="btn btn-primary ms-2" onclick="addToArray()">add pin</button>

<!-- Mapbox JS -->
<script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'></script>

<!-- Custom JS -->




<script>
  mapboxgl.accessToken = MAPBOX_API_KEY;
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 10,
    center: [-98.4916, 29.4252]
  });






    let myArray = [];

    function addToArray() {
    let newRestaurant =document.getElementById("search-box").value
    myArray.push(newRestaurant);
    pinThatAdress(newRestaurant)
    console.log(myArray);
  }



  function setZoom (zoom){
    map.setZoom(zoom);
  }

  myArray[0] = {
    name: "Chaba thai san antonio",
  }
  myArray[1] = {
    name: "4939 Northwest Loop 410, San Antonio, TX 78229"
  }
  myArray[2] = {
    name: "260 E Basse Rd, San Antonio, TX 78209"
  }

  myArray.forEach((place) => {
    pinThatAdress(place.name);
  })



  function pinThatAdress(adress) {

    geocode(adress, MAPBOX_API_KEY).then(function (result) {
        console.log(result);
        map.setZoom(10);
        marker = new mapboxgl.Marker();
        marker.setLngLat(result);
        marker.addTo(map)
        let popup = new mapboxgl.Popup();
        popup.setHTML(`<h3>` + adress + `</h3>`);
        marker.setPopup(popup)
    });
  }



  //
  // let marker = new mapboxgl.Marker();
  // marker.setLngLat([-98.4946, 29.4252]);
  // marker.addTo(map)
  //
  //
  // let popup = new mapboxgl.Popup();
  // popup.setHTML("<h3>Northstar Mall</h3>");
  // marker.setPopup(popup)
  //
  //
  //
  // marker = new mapboxgl.Marker();
  // marker.setLngLat([-98.4960, 29.5185]);
  // marker.addTo(map)



</script>
</body>
</html>